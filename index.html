<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KARA ANIME ‚Äî –¢–≤–æ–π –ø–æ—Ä—Ç–∞–ª</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --red: #ff0000;
            --bg: #000000;
            --neon: 0 0 15px #ff0000, 0 0 30px #ff0000;
            --text-neon: 0 0 10px #ff0000, 0 0 20px #ff0000;
        }

        body {
            background: var(--bg);
            color: #fff;
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            padding-bottom: 50px;
        }

        /* HEADER */
        header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 5%; background: rgba(0,0,0,0.9);
            border-bottom: 3px solid var(--red); position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 0 20px rgba(255,0,0,0.5);
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 28px; font-weight: 900; letter-spacing: 5px;
            color: #fff; text-decoration: none; text-shadow: var(--text-neon);
        }
        .logo span { color: var(--red); }

        .profile {
            display: flex; align-items: center; gap: 10px;
            border: 2px solid var(--red); padding: 5px 15px; border-radius: 30px;
            box-shadow: var(--neon); background: #000;
        }
        .profile img { width: 35px; height: 35px; border-radius: 50%; border: 1px solid #fff; }

        .container { padding: 20px 5%; }

        .search-bar {
            width: 100%; padding: 15px; border-radius: 10px; border: 2px solid #222;
            background: #111; color: #fff; font-size: 16px; outline: none; margin-bottom: 30px;
        }
        .search-bar:focus { border-color: var(--red); box-shadow: var(--neon); }

        .title {
            font-size: 22px; margin: 40px 0 20px; text-transform: uppercase;
            text-shadow: var(--text-neon); border-left: 5px solid var(--red); padding-left: 15px;
        }

        /* GRID */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 20px; }
        .card {
            background: #0a0a0a; border-radius: 12px; overflow: hidden;
            border: 1px solid #1a1a1a; transition: 0.3s; cursor: pointer;
        }
        .card:hover { transform: scale(1.05); border-color: var(--red); box-shadow: var(--neon); }
        .card img { width: 100%; height: 230px; object-fit: cover; }
        .card p { padding: 10px; text-align: center; font-weight: bold; font-size: 13px; margin: 0; }

        /* MODAL */
        #player-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 2000; flex-direction: column;
        }
        .m-header { padding: 15px; display: flex; justify-content: space-between; border-bottom: 2px solid var(--red); }
        .close { color: var(--red); font-weight: bold; cursor: pointer; text-shadow: var(--text-neon); }
        .video-box { flex-grow: 1; }
        iframe { width: 100%; height: 100%; border: none; }

        @media (max-width: 600px) { .grid { grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); } }
    </style>
</head>
<body>

<header>
    <a href="#" class="logo">KARA <span>ANIME</span></a>
    <div class="profile">
        <span style="text-shadow: 0 0 5px red;">Zhavohir</span>
        <img src="https://i.pinimg.com/736x/8a/06/6d/8a066d5498305c6d32c510e972605f6a.jpg" alt="P">
    </div>
</header>

<div class="container">
    <input type="text" class="search-bar" id="search" placeholder="–ü–æ–∏—Å–∫ –∞–Ω–∏–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –¢–æ–∫–∏–π—Å–∫–∏–π –≥—É–ª—å)..." onkeyup="search()">
    
    <div class="title">üî• –õ–ï–ì–ï–ù–î–ê–†–ù–´–ï</div>
    <div class="grid" id="favs"></div>

    <div class="title">‚ú® –ú–ê–ì–ò–Ø –ò –§–≠–ù–¢–ï–ó–ò</div>
    <div class="grid" id="fantasy"></div>

    <div class="title">üíñ –†–û–ú–ê–ù–¢–ò–ö–ê</div>
    <div class="grid" id="romance"></div>
</div>

<div id="player-modal">
    <div class="m-header">
        <div id="m-title" style="text-shadow: var(--text-neon); font-weight: bold;"></div>
        <div class="close" onclick="closeM()">–ó–ê–ö–†–´–¢–¨ [X]</div>
    </div>
    <div class="video-box" id="p-box"></div>
</div>

<script>
    const SHIKI = 'https://shikimori.one/api/animes';

    // Sen aytgan asosiy animelar
    const favIds = "617,52299,51019,37451,14813,32281,40591"; 

    async function load(params, id) {
        const res = await fetch(`${SHIKI}?${params}`);
        const data = await res.json();
        const box = document.getElementById(id);
        box.innerHTML = '';
        data.forEach(a => {
            const div = document.createElement('div');
            div.className = 'card';
            div.innerHTML = `<img src="https://shikimori.one${a.image.preview}"><p>${a.russian || a.name}</p>`;
            div.onclick = () => openM(a.russian || a.name);
            box.appendChild(div);
        });
    }

    function openM(title) {
        document.getElementById('player-modal').style.display = 'flex';
        document.getElementById('m-title').innerText = title;
        // 100% ISHLAYDIGAN USUL: Agar qidiruv natija topmasa, foydalanuvchi tanlashi uchun "find" ishlatamiz
        document.getElementById('p-box').innerHTML = `<iframe src="https://vidsrc.me/embed/anime?search=${encodeURIComponent(title)}" allowfullscreen></iframe>`;
        
        // Agar bu ham ishlamasa, Kodikning maxsus qidiruv sahifasini ochamiz
        setTimeout(() => {
            if (document.getElementById('p-box').innerHTML === "") {
                document.getElementById('p-box').innerHTML = `<iframe src="https://kodik.info/search?title=${encodeURIComponent(title)}" allowfullscreen></iframe>`;
            }
        }, 1000);
    }

    function closeM() {
        document.getElementById('player-modal').style.display = 'none';
        document.getElementById('p-box').innerHTML = '';
    }

    function search() {
        const q = document.getElementById('search').value;
        if(q.length > 2) load(`search=${q}&limit=20`, 'fantasy');
        else if(q.length == 0) init();
    }

    function init() {
        load(`ids=${favIds}`, 'favs');
        load('order=popularity&genre=10&limit=20', 'fantasy');
        load('order=popularity&genre=22&limit=20', 'romance');
    }
    init();
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KARA ANIME | Kazakhstan Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --red: #ff0000;
            --bg: #000000;
            --neon: 0 0 20px #ff0000, 0 0 40px rgba(255, 0, 0, 0.6);
            --text-glow: 0 0 10px #ff0000, 0 0 20px #ff0000;
        }

        body {
            background-color: var(--bg);
            color: #fff;
            font-family: 'Inter', sans-serif;
            margin: 0; padding-bottom: 50px;
        }

        /* HEADER */
        header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 5%; background: rgba(0,0,0,0.95);
            border-bottom: 3px solid var(--red); position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 0 25px rgba(255,0,0,0.7);
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 28px; font-weight: 900; letter-spacing: 5px;
            color: #fff; text-decoration: none; text-shadow: var(--text-glow);
        }
        .logo span { color: var(--red); }

        .profile {
            display: flex; align-items: center; gap: 10px;
            border: 2px solid var(--red); padding: 5px 12px; border-radius: 30px;
            box-shadow: var(--neon); background: #000;
        }
        .profile span { font-weight: bold; font-size: 14px; text-shadow: 0 0 5px red; }
        .profile img { width: 35px; height: 35px; border-radius: 50%; border: 1.5px solid #fff; object-fit: cover; }

        .container { padding: 20px 5%; }

        .search-box {
            width: 100%; padding: 18px; border-radius: 12px; border: 2px solid #222;
            background: #111; color: #fff; font-size: 16px; outline: none; margin-bottom: 40px;
            box-sizing: border-box; transition: 0.3s;
        }
        .search-box:focus { border-color: var(--red); box-shadow: var(--neon); }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 20px; margin: 40px 0 20px; text-transform: uppercase;
            text-shadow: var(--text-glow); border-left: 6px solid var(--red); padding-left: 15px;
        }

        /* GRID */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(165px, 1fr)); gap: 25px; }
        .card {
            background: #0d0d0d; border-radius: 15px; overflow: hidden;
            border: 1px solid #1a1a1a; transition: 0.4s ease; cursor: pointer;
        }
        .card:hover { transform: translateY(-10px); border-color: var(--red); box-shadow: var(--neon); }
        .card img { width: 100%; height: 240px; object-fit: cover; }
        .card-info { padding: 12px; text-align: center; font-weight: bold; font-size: 13px; }

        /* PLAYER MODAL */
        #player-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 2000; flex-direction: column;
        }
        .modal-header { padding: 15px 5%; display: flex; justify-content: space-between; border-bottom: 3px solid var(--red); background: #000; }
        .close-btn { color: var(--red); font-weight: bold; cursor: pointer; font-size: 18px; text-shadow: var(--text-glow); }
        
        .player-container { flex-grow: 1; position: relative; }
        iframe { width: 100%; height: 100%; border: none; }

        @media (max-width: 600px) { .grid { grid-template-columns: repeat(auto-fill, minmax(145px, 1fr)); gap: 15px; } }
    </style>
</head>
<body>

<header>
    <a href="#" class="logo">KARA <span>ANIME</span></a>
    <div class="profile">
        <span>Zhavohir</span>
        <img src="https://i.pinimg.com/736x/8a/06/6d/8a066d5498305c6d32c510e972605f6a.jpg" alt="P">
    </div>
</header>

<div class="container">
    <input type="text" class="search-box" id="search" placeholder="–ü–æ–∏—Å–∫ –∞–Ω–∏–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ú–∞–≥–∏—á–µ—Å–∫–∞—è –±–∏—Ç–≤–∞)..." onkeyup="handleSearch()">
    
    <div class="section-title">üíé –í–ê–® –¢–û–ü</div>
    <div class="grid" id="favorites"></div>

    <div class="section-title">üî• –ü–û–ü–£–õ–Ø–†–ù–û–ï</div>
    <div class="grid" id="popular"></div>
</div>

<div id="player-modal">
    <div class="modal-header">
        <div id="m-title" style="text-shadow: var(--text-glow); font-weight: bold;"></div>
        <div class="close-btn" onclick="closePlayer()">–ó–ê–ö–†–´–¢–¨ [X]</div>
    </div>
    <div class="player-container" id="p-frame"></div>
</div>

<script>
    const SHIKI = 'https://shikimori.one/api/animes';
    const favIds = "617,52299,51019,37451,14813,50528,41467,21,30"; // Tokyo Ghoul, Solo Leveling, One Piece...

    async function loadAnimes(params, containerId) {
        try {
            const response = await fetch(`${SHIKI}?${params}`);
            const data = await response.json();
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            data.forEach(anime => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <img src="https://shikimori.one${anime.image.preview}">
                    <div class="card-info">${anime.russian || anime.name}</div>
                `;
                card.onclick = () => openPlayer(anime.russian || anime.name, anime.id);
                container.appendChild(card);
            });
        } catch (e) { console.error("Error"); }
    }

    function openPlayer(title, id) {
        document.getElementById('player-modal').style.display = 'flex';
        document.getElementById('m-title').innerText = title;
        
        // QOZOG'ISTON UCHUN ENG YAXSHI VARIANT:
        // Consumet yoki Vidsrc. Endi qidiruv tizimi orqali emas, ssilka orqali ulaymiz.
        const frame = document.getElementById('p-frame');
        frame.innerHTML = `<iframe src="https://vidsrc.me/embed/anime?search=${encodeURIComponent(title)}" allowfullscreen></iframe>`;
    }

    function closePlayer() {
        document.getElementById('player-modal').style.display = 'none';
        document.getElementById('p-frame').innerHTML = '';
    }

    function handleSearch() {
        const q = document.getElementById('search').value;
        if(q.length > 2) loadAnimes(`search=${encodeURIComponent(q)}&limit=24`, 'popular');
        else if(q.length === 0) init();
    }

    function init() {
        loadAnimes(`ids=${favIds}`, 'favorites');
        loadAnimes('order=popularity&status=released&limit=24', 'popular');
    }

    init();
</script>
</body>
</html>
